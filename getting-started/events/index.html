<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Working with Events | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/getting-started/events/" />
  <link rel="alternate icon" href="/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.87592179d2b736be842bb7a3dd97c7a09f561effecbfb81ec0a18685eb1bd4e0.css" integrity="sha256-h1khedK3Nr6EK7ej3ZfHoJ9WHv/sv7gewKGGhesb1OA=" crossorigin="anonymous">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Working with Events">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Working with Events">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/getting-started/events/">
  <meta name="twitter:title" content="Working with Events" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div id="migration-info">
      <div id="migration-text">thethingsstack.io has moved to thethingsindustries.com/docs</div>
      <div id="migration-button" class="button is-primary">Got it</div>
  </div>
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.10</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/docs/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav>


<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Working with Events</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/getting-started/events/" class="is-active">Overview</a>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Working with Events


</h1>

<div class="content">

<p>The Things Stack generates lots of events that allow you to get insight in what is going on. You can subscribe to application, gateway, end device events, as well as to user, organization and OAuth client events.</p>
<p>This guide shows how to subscribe to events with the CLI and with the HTTP API.</p>
<h2 id="subscribe-with-cli">Subscribe with CLI</h2>
<p>To follow your gateway <code>gtw1</code> and application <code>app1</code> events at the same time:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli events subscribe --gateway-id gtw1 --application-id app1
</code></pre></div><h2 id="subscribe-with-http">Subscribe with HTTP</h2>
<p>You can get streaming events with <code>curl</code>. For this, you need an API key for the entities you want to watch, for example:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli users api-key create <span class="se">\
</span><span class="se"></span>  --user-id admin <span class="se">\
</span><span class="se"></span>  --right-application-all <span class="se">\
</span><span class="se"></span>  --right-gateway-all
</code></pre></div><p>With the created API key:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl https://thethings.example.com/api/v3/events <span class="se">\
</span><span class="se"></span>  -X POST <span class="se">\
</span><span class="se"></span>  -H <span class="s2">&#34;Authorization: Bearer NNSXS.BR55PTYILPPVXY..&#34;</span> <span class="se">\
</span><span class="se"></span>  --data <span class="s1">&#39;{&#34;identifiers&#34;:[{&#34;application_ids&#34;:{&#34;application_id&#34;:&#34;app1&#34;}},{&#34;gateway_ids&#34;:{&#34;gateway_id&#34;:&#34;gtw1&#34;}}]}&#39;</span>
</code></pre></div><div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  The created API key for events is highly privileged - do not use it if you don&rsquo;t need it for events.
</div>
<h2 id="example-join-flow">Example: Join Flow</h2>
<p>See the events of a typical join flow in the example below:</p>
<details><summary>Join flow example</summary>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;gs.up.receive&#34;</span><span class="p">,</span> <span class="c1">// Gateway Server received an uplink message from a device.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:34.786220Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;gateway_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;gateway_id&#34;</span><span class="o">:</span> <span class="s2">&#34;multitech&#34;</span><span class="p">,</span>
        <span class="s2">&#34;eui&#34;</span><span class="o">:</span> <span class="s2">&#34;00800000A0000DB4&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;js.join.accept&#34;</span><span class="p">,</span> <span class="c1">// Join Server accepted the join-accept.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:34.806812Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;device_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;device_id&#34;</span><span class="o">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;application_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&#34;application_id&#34;</span><span class="o">:</span> <span class="s2">&#34;app1&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;dev_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;join_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.NsJs/HandleJoin:01D7KWB0NCTDY835V5N3CYWBZK&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;ns.up.join.forward&#34;</span><span class="p">,</span> <span class="c1">// Network Server forwarded the join-accept and it got accepted.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:34.808132Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;device_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;device_id&#34;</span><span class="o">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;application_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&#34;application_id&#34;</span><span class="o">:</span> <span class="s2">&#34;app1&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;dev_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;join_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span><span class="p">,</span>
    <span class="s2">&#34;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;ns.up.merge_metadata&#34;</span><span class="p">,</span> <span class="c1">// Network Server merged metadata of incoming uplink messages.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:34.991332Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;device_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;device_id&#34;</span><span class="o">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;application_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&#34;application_id&#34;</span><span class="o">:</span> <span class="s2">&#34;app1&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;dev_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;join_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;data&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;@type&#34;</span><span class="o">:</span> <span class="s2">&#34;type.googleapis.com/google.protobuf.Value&#34;</span><span class="p">,</span>
    <span class="s2">&#34;value&#34;</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">// There was 1 gateway that received the join-request.
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="c1">// Here you find the correlation IDs of all gs.up.receive events that were merged.
</span><span class="c1"></span>    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span><span class="p">,</span>
    <span class="s2">&#34;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;as.up.join.receive&#34;</span><span class="p">,</span> <span class="c1">// Application Server receives the join-accept.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:35.005090Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;device_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;device_id&#34;</span><span class="o">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;application_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&#34;application_id&#34;</span><span class="o">:</span> <span class="s2">&#34;app1&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;dev_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;join_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dev_addr&#34;</span><span class="o">:</span> <span class="s2">&#34;0063ECE2&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;as:up:01D7KWB0VX1D7G3RKFN9HDA39Q&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span><span class="p">,</span>
    <span class="s2">&#34;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;as.up.join.forward&#34;</span><span class="p">,</span> <span class="c1">// Application Server forwards the join-accept to an application (CLI, MQTT, webhooks, etc).
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:35.010243Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;device_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;device_id&#34;</span><span class="o">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;application_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&#34;application_id&#34;</span><span class="o">:</span> <span class="s2">&#34;app1&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;dev_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;join_eui&#34;</span><span class="o">:</span> <span class="s2">&#34;4200000000000000&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dev_addr&#34;</span><span class="o">:</span> <span class="s2">&#34;0063ECE2&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;as:up:01D7KWB0VX1D7G3RKFN9HDA39Q&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span><span class="p">,</span>
    <span class="s2">&#34;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;gs.down.send&#34;</span><span class="p">,</span> <span class="c1">// Gateway Server sent the join-accept to the gateway.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:35.046147Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;gateway_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;gateway_id&#34;</span><span class="o">:</span> <span class="s2">&#34;multitech&#34;</span><span class="p">,</span>
        <span class="s2">&#34;eui&#34;</span><span class="o">:</span> <span class="s2">&#34;00800000A0000DB4&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rpc:/ttn.lorawan.v3.NsGs/ScheduleDownlink:01D7KWB0W84AJ1P5A3AQV6R4J7&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;gs.up.forward&#34;</span><span class="p">,</span> <span class="c1">// Gateway Server forwarded join-request to the Network Server.
</span><span class="c1"></span>  <span class="s2">&#34;time&#34;</span><span class="o">:</span> <span class="s2">&#34;2019-04-04T09:54:35.991226Z&#34;</span><span class="p">,</span>
  <span class="s2">&#34;identifiers&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&#34;gateway_ids&#34;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&#34;gateway_id&#34;</span><span class="o">:</span> <span class="s2">&#34;multitech&#34;</span><span class="p">,</span>
        <span class="s2">&#34;eui&#34;</span><span class="o">:</span> <span class="s2">&#34;00800000A0000DB4&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&#34;correlation_ids&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&#34;</span><span class="p">,</span>
    <span class="s2">&#34;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&#34;</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></details>
</div>






<div class="is-clearfix">
</div>




      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer background-footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra on 25 Nov 2020.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/cd702053eceb85929389def980e30c175b89e7fd">
      doc: Update notes in Getting Started
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/getting-started/events/_index.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.e9df3c06e815b9686686212e86bfd0217a508f5ccee0139d7bc899ef7460191e.js" integrity="sha256-6d88BugVuWhmhiEuhr/QIXpQj1zO4BOde8iZ73RgGR4=" crossorigin="anonymous"></script>

</body>

</html>
